<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Monkey Pirate Game</title>
  <style>
    body {
      background: linear-gradient(#86c4ff 0%, #c2ffb0 100%);
      margin: 0;
      font-family: 'Trebuchet MS', sans-serif;
      overflow: hidden;
    }
    #gameCanvas {
      background: #c2ffb0;
      border: 5px solid #775533;
      display: block;
      margin: 30px auto;
      box-shadow: 0 0 24px #333;
    }
    #scoreboard {
      text-align: center;
      font-size: 1.4em;
      font-weight: bold;
      margin-top: 10px;
      color: #4e2e11;
    }
    #instructions {
      text-align: center;
      margin-top: 10px;
      color: #2d1a09;
    }
    #gameOverScreen {
      position: absolute;
      top: 70px;
      left: 0;
      width: 100vw;
      height: 100vh;
      text-align: center;
      background: rgba(0,0,0,0.6);
      display: none;
      color: #fff;
      font-size: 2em;
      z-index: 10;
    }
    #playAgainBtn {
      padding: 12px 36px;
      font-size: 1.2em;
      background: #ffe08d;
      border: 2px solid #775533;
      border-radius: 8px;
      cursor: pointer;
      margin-top: 16px;
    }
    #playAgainBtn:hover {
      background: #ffd257;
    }
  </style>
</head>
<body>
  <div id="scoreboard">Score: <span id="score">0</span></div>
  <div id="instructions">Press <b>Space</b> or <b>Tap</b> to jump!</div>
  <canvas id="gameCanvas" width="700" height="400"></canvas>
  <div id="gameOverScreen">
    <div id="gameOverMsg"></div>
    <button id="playAgainBtn">Play Again</button>
  </div>
  <script>
    // Canvas setup
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    const w = canvas.width, h = canvas.height;

    // Game variables
    let score = 0, highScore = 0;
    let gameRunning = false;
    let gravity = 0.7, jumpStrength = 11;
    let pirateX = 80, pirateY = h - 90, pirateW = 48, pirateH = 56;
    let pirateVelY = 0, isJumping = false;
    let obstacles = [];
    let bananas = [];
    let groundY = h - 60;
    let spawnTimer = 0, bananaTimer = 0;
    let pirateSpriteFrame = 0;

    // Game assets: monkey pirate (simple pixel art)
    function drawPirate(x, y, frame) {
      // body
      ctx.save();
      ctx.translate(x, y);
      ctx.scale(1, 1);

      // Feet
      ctx.fillStyle = "#775533";
      ctx.fillRect(-15, 30, 12, 10);
      ctx.fillRect(7, 30, 12, 10);

      // Shirt
      ctx.fillStyle = "#ffe08d";
      ctx.fillRect(-15, -10, 34, 28);

      // Sash
      ctx.fillStyle = "#c52020";
      ctx.fillRect(-15, 18, 34, 8);

      // Head
      ctx.beginPath();
      ctx.arc(0, -20, 18, 0, Math.PI*2);
      ctx.fillStyle = "#b4803a";
      ctx.fill();

      // Pirate hat
      ctx.beginPath();
      ctx.moveTo(-18, -33);
      ctx.quadraticCurveTo(0, -52, 18, -33);
      ctx.quadraticCurveTo(10, -25, -10, -28);
      ctx.closePath();
      ctx.fillStyle = "#222";
      ctx.fill();
      // Hat brim
      ctx.fillStyle = "#ffe08d";
      ctx.fillRect(-12, -34, 24, 6);
      // Skull
      ctx.fillStyle = "#fff";
      ctx.beginPath();
      ctx.arc(0, -37, 4, 0, Math.PI*2);
      ctx.fill();

      // Eyes
      ctx.fillStyle = "#fff";
      ctx.beginPath();
      ctx.arc(-6, -22, 3, 0, Math.PI*2);
      ctx.arc(6, -22, 3, 0, Math.PI*2);
      ctx.fill();
      ctx.fillStyle = "#222";
      ctx.beginPath();
      ctx.arc(-6, -22, 1.3, 0, Math.PI*2);
      ctx.arc(6, -22, 1.3, 0, Math.PI*2);
      ctx.fill();

      // Smile
      ctx.strokeStyle = "#222";
      ctx.lineWidth = 2;
      ctx.beginPath();
      ctx.arc(0, -15, 6, 0.2, 0.9);
      ctx.stroke();

      // Hand waving (animation)
      ctx.save();
      ctx.rotate(frame % 2 === 0 ? 0.3 : -0.3);
      ctx.fillStyle = "#b4803a";
      ctx.fillRect(19, -10, 10, 30);
      ctx.beginPath();
      ctx.arc(24, 18, 7, 0, Math.PI*2);
      ctx.fill();
      ctx.restore();

      // Left hand
      ctx.fillStyle = "#b4803a";
      ctx.fillRect(-29, -10, 10, 30);
      ctx.beginPath();
      ctx.arc(-24, 18, 7, 0, Math.PI*2);
      ctx.fill();

      ctx.restore();
    }

    // Draw ground
    function drawGround() {
      ctx.fillStyle = "#8bc85c";
      ctx.fillRect(0, groundY, w, h-groundY
